import React, { useState } from 'react';
import {
  Box,
  Table,
  TableBody,
  TableCell,
  TableContainer,
  TableHead,
  TableRow,
  Paper,
  Typography,
  Chip,
  TextField,
  InputAdornment,
  Button,
  Dialog,
  DialogTitle,
  DialogContent,
  DialogActions,
} from '@mui/material';
import {
  Search as SearchIcon,
  FilterList as FilterListIcon,
  Close as CloseIcon,
} from '@mui/icons-material';

export const companies = [
  {
    id: 1,
    name: 'EraB2B',
    role: 'Account Manager ‚Ä¢ SaaS B2B',
    status: 'En Poste',
    skills: ['Account Management', 'Business Development', 'Social Selling', 'CRM', 'Sales'],
    score: 100,
    period: 'D√©c. 2024 - Pr√©sent',
    description: `Account Manager B2B sp√©cialis√© dans la gestion et le d√©veloppement de comptes strat√©giques.

üéØ Gestion de Comptes :
‚Ä¢ D√©veloppement et fid√©lisation d'un portefeuille de clients B2B strat√©giques
‚Ä¢ Atteinte de 150% des objectifs de croissance sur les comptes existants
‚Ä¢ Mise en place de strat√©gies d'expansion et de cross-selling
‚Ä¢ Gestion de comptes repr√©sentant un CA annuel de 500K‚Ç¨+

üí° Business Development :
‚Ä¢ Identification et qualification d'opportunit√©s de d√©veloppement
‚Ä¢ √âlaboration de propositions commerciales sur mesure
‚Ä¢ N√©gociation et closing de contrats strat√©giques
‚Ä¢ Construction de relations long-terme avec les d√©cideurs cl√©s

üöÄ R√©sultats & Impact :
‚Ä¢ Augmentation de 120% du revenu moyen par compte
‚Ä¢ Taux de r√©tention client de 95%
‚Ä¢ D√©veloppement de 3 comptes majeurs g√©n√©rant 40% du CA
‚Ä¢ Mise en place d'un processus de suivi client optimis√©`,
    location: '√Ä distance'
  },
  {
    id: 2,
    name: 'Yunico',
    role: 'Growth Hacker ‚Ä¢ SaaS B2B',
    status: 'En Poste',
    skills: ['Growth Hacking', 'Marketing B2B', 'CRM', 'Automatisation', 'Social Selling'],
    score: 100,
    period: 'Juin 2024 - Pr√©sent',
    description: `Expert en Growth Marketing B2B focalis√© sur l'optimisation des processus commerciaux et l'automatisation intelligente.

üéØ R√©alisations Principales :
‚Ä¢ Configuration avanc√©e de HubSpot comme hub central avec personnalisation pouss√©e des workflows
‚Ä¢ D√©veloppement d'une strat√©gie de prospection LinkedIn g√©n√©rant 100+ leads qualifi√©s par mois
‚Ä¢ Mise en place de s√©quences d'emails personnalis√©es avec un taux d'ouverture de 45%
‚Ä¢ Cr√©ation d'un syst√®me de scoring leads multicrit√®res

üí° Optimisations & Automatisations :
‚Ä¢ Int√©gration compl√®te de la stack marketing (HubSpot, Sales Navigator, Lemlist, Make)
‚Ä¢ D√©veloppement de templates de prospection personnalis√©s augmentant le taux de r√©ponse de 80%
‚Ä¢ Cr√©ation de workflows d'enrichissement et de qualification automatiques
‚Ä¢ Mise en place d'un syst√®me de reporting automatis√©

üöÄ R√©sultats Mesurables :
‚Ä¢ Augmentation de 200% du pipeline commercial en 6 mois
‚Ä¢ R√©duction de 70% du temps de prospection manuelle
‚Ä¢ Am√©lioration du taux de conversion de 35%
‚Ä¢ ROI marketing multipli√© par 3`,
    location: '√Ä distance'
  },
  {
    id: 3,
    name: 'Skillcamp',
    role: 'Responsable des partenariats ‚Ä¢ E-sport',
    status: 'En Poste',
    skills: ['Partenariats', 'Growth Hacking', 'E-sport', 'Marketing Digital'],
    score: 95,
    period: 'Mars 2024 - Pr√©sent',
    description: `Responsable du d√©veloppement et de la gestion des partenariats strat√©giques dans l'√©cosyst√®me e-sport.

üéØ D√©veloppement Commercial :
‚Ä¢ Identification et acquisition de 20+ partenaires strat√©giques majeurs
‚Ä¢ N√©gociation et closing de contrats de sponsoring d'une valeur totale de 500K‚Ç¨
‚Ä¢ Cr√©ation d'offres de partenariat personnalis√©es √† haute valeur ajout√©e
‚Ä¢ D√©veloppement de nouvelles opportunit√©s de revenus

üí° Strat√©gie & Innovation :
‚Ä¢ Mise en place d'une strat√©gie de prospection digitale cibl√©e
‚Ä¢ Cr√©ation d'un programme d'activation des partenariats innovant
‚Ä¢ D√©veloppement de KPIs sp√©cifiques au secteur e-sport
‚Ä¢ Organisation d'√©v√©nements exclusifs pour les partenaires

üöÄ Impact Business :
‚Ä¢ Croissance de 150% du revenu partenariats en 6 mois
‚Ä¢ Taux de r√©tention des partenaires de 90%
‚Ä¢ Augmentation de 200% de la visibilit√© de la marque
‚Ä¢ Cr√©ation de 5 nouveaux formats d'activation digitale`,
    location: '√Ä distance'
  },
  {
    id: 4,
    name: 'BD Multimedia',
    role: 'Growth Hacker ‚Ä¢ Marketing Digital',
    status: 'Exp√©rience Pass√©e',
    skills: ['Growth Hacking', 'Marketing Digital', 'Analytics', 'Social Media', 'SEO'],
    score: 90,
    period: 'Avr. 2023 - Sept. 2023',
    description: `Expert en Growth Hacking et Marketing Digital sp√©cialis√© dans l'acquisition et la conversion.

üéØ R√©alisations Marketing :
‚Ä¢ D√©veloppement et ex√©cution de campagnes marketing g√©n√©rant +150% de trafic qualifi√©
‚Ä¢ Mise en place d'une strat√©gie SEO multipliant par 3 la visibilit√© organique
‚Ä¢ Optimisation des tunnels de conversion augmentant le taux de conversion de 40%
‚Ä¢ Cr√©ation et test de multiples landing pages avec A/B testing

üí° Innovation & Analytics :
‚Ä¢ Impl√©mentation d'un syst√®me de tracking avanc√© avec Google Analytics 4
‚Ä¢ Cr√©ation de dashboards de performance personnalis√©s
‚Ä¢ D√©veloppement de strat√©gies d'acquisition innovantes
‚Ä¢ Mise en place d'automatisations marketing via Zapier

üöÄ R√©sultats Cl√©s :
‚Ä¢ Augmentation de 200% du ROI des campagnes marketing
‚Ä¢ R√©duction de 45% du co√ªt d'acquisition client
‚Ä¢ Am√©lioration de 60% du taux d'engagement social media
‚Ä¢ Croissance de 180% du nombre de leads g√©n√©r√©s`,
    location: 'Paris'
  },
  {
    id: 5,
    name: 'Centaure Avocats',
    role: 'Charg√© de communication ‚Ä¢ Cabinet d\'avocats',
    status: 'Exp√©rience Pass√©e',
    skills: ['Communication', 'Marketing', '√âv√©nementiel', 'Relations Publiques', 'Content Strategy'],
    score: 85,
    period: 'Sept. 2022 - F√©vr. 2023',
    description: `Responsable de la strat√©gie de communication globale et du d√©veloppement de la pr√©sence digitale du cabinet.

üéØ Strat√©gie & Communication :
‚Ä¢ √âlaboration et d√©ploiement d'une strat√©gie de communication 360¬∞
‚Ä¢ Organisation de 5 √©v√©nements professionnels majeurs (50-200 participants)
‚Ä¢ Cr√©ation d'une newsletter mensuelle avec un taux d'ouverture de 35%
‚Ä¢ D√©veloppement de partenariats strat√©giques avec des m√©dias juridiques

üí° Marketing Digital & Contenu :
‚Ä¢ Refonte compl√®te de l'identit√© visuelle du cabinet
‚Ä¢ Production de contenus experts (articles, white papers, podcasts)
‚Ä¢ Gestion et animation des r√©seaux sociaux professionnels
‚Ä¢ Mise en place d'une strat√©gie de content marketing B2B

üöÄ Impact & Performance :
‚Ä¢ Augmentation de 120% de la visibilit√© du cabinet
‚Ä¢ Croissance de 80% de l'engagement LinkedIn
‚Ä¢ G√©n√©ration de 30+ opportunit√©s business via le digital
‚Ä¢ Am√©lioration de 90% de la r√©putation en ligne`,
    location: 'Paris'
  },
  {
    id: 6,
    name: 'TaliAcademie.com',
    role: 'Social Media Manager ‚Ä¢ E-learning',
    status: 'Exp√©rience Pass√©e',
    skills: ['Social Media', 'Cr√©ation de contenu', 'Montage vid√©o', 'Community Management', 'Analytics'],
    score: 80,
    period: 'Janv. 2022 - Juin 2022',
    description: `Expert en gestion des r√©seaux sociaux et cr√©ation de contenu pour une plateforme e-learning en croissance.

üéØ Content & Social Media :
‚Ä¢ Cr√©ation et gestion de contenus pour 5 plateformes sociales majeures
‚Ä¢ Production de 100+ vid√©os √©ducatives optimis√©es pour chaque plateforme
‚Ä¢ D√©veloppement d'une strat√©gie de contenu viral g√©n√©rant 1M+ de vues
‚Ä¢ Animation d'une communaut√© de 50K+ membres

üí° Cr√©ativit√© & Production :
‚Ä¢ Mise en place d'un workflow de production vid√©o optimis√©
‚Ä¢ Cr√©ation de formats innovants augmentant l'engagement de 150%
‚Ä¢ D√©veloppement d'une charte graphique coh√©rente
‚Ä¢ Production de contenus p√©dagogiques engageants

üöÄ Performances & Croissance :
‚Ä¢ Croissance organique de 200% des abonn√©s en 6 mois
‚Ä¢ Augmentation de 300% du taux d'engagement moyen
‚Ä¢ Am√©lioration de 80% du temps de visionnage
‚Ä¢ G√©n√©ration de 40% du trafic site via les r√©seaux sociaux`,
    location: 'Paris'
  },
  {
    id: 7,
    name: 'Epsilon eSports',
    role: 'Communication 360¬∞ ‚Ä¢ E-sport',
    status: 'Exp√©rience Pass√©e',
    skills: ['√âv√©nementiel', 'Communication', 'Gestion de projet', 'Relations Presse', 'Sponsoring'],
    score: 75,
    period: 'Mars 2019 - Juin 2019',
    description: `Chef de projet √©v√©nementiel et communication dans l'industrie de l'e-sport.

üéØ Gestion √âv√©nementielle :
‚Ä¢ Organisation de 3 tournois majeurs avec 500+ participants chacun
‚Ä¢ Coordination d'une √©quipe de 20 personnes
‚Ä¢ Gestion de budgets √©v√©nementiels de 50K‚Ç¨+
‚Ä¢ N√©gociation et gestion des partenariats techniques

üí° Communication & RP :
‚Ä¢ D√©veloppement de plans de communication √©v√©nementielle
‚Ä¢ Relations presse et obtention de 15+ retomb√©es m√©diatiques
‚Ä¢ Cr√©ation de supports de communication impactants
‚Ä¢ Gestion des relations avec les √©quipes e-sport

üöÄ R√©sultats & Impact :
‚Ä¢ Taux de satisfaction participant de 95%
‚Ä¢ Augmentation de 100% de la couverture m√©diatique
‚Ä¢ G√©n√©ration de 30K‚Ç¨+ de revenus sponsoring
‚Ä¢ Croissance de 150% de l'audience √©v√©nementielle`,
    location: 'Bruxelles'
  },
  {
    id: 8,
    name: 'Myth\'s Legion',
    role: 'Manager LoL ‚Ä¢ E-sport',
    status: 'Exp√©rience Pass√©e',
    skills: ['Management d\'√©quipe', 'E-sport', 'Coaching', 'Gestion de projet', 'Comp√©tition'],
    score: 70,
    period: '2017',
    description: `Manager d'une √©quipe League of Legends √©voluant en comp√©tition.

üéØ Management Sportif :
‚Ä¢ Gestion compl√®te d'une √©quipe de 5 joueurs et 2 rempla√ßants
‚Ä¢ Organisation et supervision des sessions d'entra√Ænement quotidiennes
‚Ä¢ Analyse des performances et d√©veloppement de strat√©gies
‚Ä¢ Coordination avec les coachs et analystes

üí° D√©veloppement d'√âquipe :
‚Ä¢ Recrutement et formation de nouveaux talents
‚Ä¢ Mise en place d'un programme d'entra√Ænement structur√©
‚Ä¢ Gestion des relations inter-√©quipes
‚Ä¢ Organisation de bootcamps de pr√©paration

üöÄ Accomplissements :
‚Ä¢ Qualification pour plusieurs tournois majeurs
‚Ä¢ D√©veloppement d'une structure d'entra√Ænement efficace
‚Ä¢ Am√©lioration significative des performances d'√©quipe
‚Ä¢ Cr√©ation d'un environnement professionnel stable`,
    location: 'Paris'
  }
];

export default function Companies() {
  const [selectedCompany, setSelectedCompany] = useState(null);
  const [searchQuery, setSearchQuery] = useState('');

  const handleOpenDetails = (company) => {
    setSelectedCompany(company);
  };

  const handleCloseDetails = () => {
    setSelectedCompany(null);
  };

  const filteredCompanies = companies.filter(company =>
    company.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
    company.role.toLowerCase().includes(searchQuery.toLowerCase()) ||
    company.skills.some(skill => skill.toLowerCase().includes(searchQuery.toLowerCase()))
  );

  return (
    <Box sx={{ p: 3 }}>
      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>
        <Typography variant="h4">
          Entreprises
        </Typography>
        <Button
          variant="contained"
          startIcon={<FilterListIcon />}
          size="small"
          sx={{
            bgcolor: 'grey.800',
            '&:hover': {
              bgcolor: 'grey.900'
            }
          }}
        >
          Filtres
        </Button>
      </Box>

      <TextField
        fullWidth
        variant="outlined"
        placeholder="Rechercher par nom d'entreprise, industrie ou poste..."
        value={searchQuery}
        onChange={(e) => setSearchQuery(e.target.value)}
        sx={{ 
          mb: 3,
          '& .MuiOutlinedInput-root': {
            bgcolor: 'background.paper',
            '& fieldset': {
              borderColor: 'grey.200'
            }
          }
        }}
        InputProps={{
          startAdornment: (
            <InputAdornment position="start">
              <SearchIcon sx={{ color: 'grey.500' }} />
            </InputAdornment>
          ),
        }}
      />

      <TableContainer component={Paper} elevation={0}>
        <Table>
          <TableHead>
            <TableRow>
              <TableCell>Entreprise</TableCell>
              <TableCell>Statut</TableCell>
              <TableCell>R√©alisations</TableCell>
              <TableCell>Score</TableCell>
              <TableCell>P√©riode</TableCell>
            </TableRow>
          </TableHead>
          <TableBody>
            {filteredCompanies.map((company) => (
              <TableRow 
                key={company.id}
                hover
                onClick={() => handleOpenDetails(company)}
                sx={{ 
                  '&:hover': { bgcolor: 'action.hover' },
                  cursor: 'pointer'
                }}
              >
                <TableCell>
                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>
                    <Box 
                      sx={{ 
                        width: 40, 
                        height: 40, 
                        bgcolor: 'grey.100', 
                        borderRadius: '50%',
                        display: 'flex',
                        alignItems: 'center',
                        justifyContent: 'center',
                        fontWeight: 500,
                        color: 'grey.700'
                      }}
                    >
                      {company.name[0]}
                    </Box>
                    <Box>
                      <Typography variant="subtitle1" sx={{ fontWeight: 500 }}>
                        {company.name}
                      </Typography>
                      <Typography variant="body2" color="text.secondary">
                        {company.role}
                      </Typography>
                    </Box>
                  </Box>
                </TableCell>
                <TableCell>
                  <Chip 
                    label={company.status}
                    size="small"
                    sx={{ 
                      bgcolor: company.status === 'En Poste' ? '#203343' : 'grey.100',
                      color: company.status === 'En Poste' ? '#fff' : 'text.secondary',
                      fontWeight: company.status === 'En Poste' ? 500 : 400,
                      '& .MuiChip-label': { px: 1 }
                    }}
                  />
                </TableCell>
                <TableCell>
                  <Box sx={{ display: 'flex', gap: 0.5, flexWrap: 'wrap' }}>
                    {company.skills.map((skill, index) => (
                      <Chip
                        key={index}
                        label={skill}
                        size="small"
                        variant="outlined"
                        sx={{ 
                          borderColor: 'grey.300',
                          color: 'text.primary',
                          bgcolor: 'background.paper'
                        }}
                      />
                    ))}
                  </Box>
                </TableCell>
                <TableCell>
                  <Box sx={{ display: 'flex', alignItems: 'center' }}>
                    <Typography 
                      variant="body2" 
                      sx={{ 
                        color: 'text.primary',
                        fontWeight: 500,
                        '&::before': {
                          content: '"‚òÖ"',
                          color: 'warning.main',
                          marginRight: '4px'
                        }
                      }}
                    >
                      {company.score}%
                    </Typography>
                  </Box>
                </TableCell>
                <TableCell>
                  <Typography variant="body2">{company.period}</Typography>
                </TableCell>
              </TableRow>
            ))}
          </TableBody>
        </Table>
      </TableContainer>

      <Dialog 
        open={Boolean(selectedCompany)} 
        onClose={handleCloseDetails}
        maxWidth="sm"
        fullWidth
      >
        {selectedCompany && (
          <>
            <DialogTitle>
              <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>
                <Box sx={{ display: 'flex', gap: 2 }}>
                  <Box 
                    sx={{ 
                      width: 48, 
                      height: 48, 
                      bgcolor: 'grey.100', 
                      borderRadius: '50%',
                      display: 'flex',
                      alignItems: 'center',
                      justifyContent: 'center',
                      fontWeight: 500,
                      color: 'grey.700',
                      fontSize: '1.2rem'
                    }}
                  >
                    {selectedCompany.name[0]}
                  </Box>
                  <Box>
                    <Typography variant="h6" gutterBottom>
                      {selectedCompany.name}
                    </Typography>
                    <Typography variant="subtitle2" color="text.secondary">
                      {selectedCompany.role}
                    </Typography>
                  </Box>
                </Box>
                <Button
                  onClick={handleCloseDetails}
                  sx={{ minWidth: 'auto', p: 0.5 }}
                >
                  <CloseIcon />
                </Button>
              </Box>
            </DialogTitle>
            <DialogContent dividers>
              <Box sx={{ mb: 3 }}>
                <Typography variant="subtitle1" gutterBottom sx={{ fontWeight: 500 }}>
                  Informations
                </Typography>
                <Box sx={{ display: 'flex', gap: 2, mb: 1 }}>
                  <Typography variant="body2" color="text.secondary">
                    {selectedCompany.period}
                  </Typography>
                  <Typography variant="body2" color="text.secondary">
                    ‚Ä¢
                  </Typography>
                  <Typography variant="body2" color="text.secondary">
                    {selectedCompany.location}
                  </Typography>
                </Box>
                <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap', mb: 1 }}>
                  <Chip 
                    label={selectedCompany.status}
                    size="small"
                    sx={{ 
                      bgcolor: selectedCompany.status === 'En Poste' ? '#203343' : 'grey.100',
                      color: selectedCompany.status === 'En Poste' ? '#fff' : 'text.secondary',
                      fontWeight: selectedCompany.status === 'En Poste' ? 500 : 400
                    }}
                  />
                  {selectedCompany.skills.map((skill, index) => (
                    <Chip
                      key={index}
                      label={skill}
                      size="small"
                      variant="outlined"
                      sx={{ borderColor: 'grey.300' }}
                    />
                  ))}
                </Box>
              </Box>
              <Box>
                <Typography variant="subtitle1" gutterBottom sx={{ fontWeight: 500 }}>
                  Description & Missions
                </Typography>
                <Typography 
                  variant="body2" 
                  color="text.secondary"
                  sx={{ whiteSpace: 'pre-line' }}
                >
                  {selectedCompany.description}
                </Typography>
              </Box>
            </DialogContent>
            <DialogActions sx={{ px: 3, py: 2 }}>
              <Button onClick={handleCloseDetails} variant="outlined">
                Fermer
              </Button>
            </DialogActions>
          </>
        )}
      </Dialog>
    </Box>
  );
}
